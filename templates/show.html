{% extends "layout.html" %}
{% block content %}
    <div class="container-fluid text-center">
        <div class="jumbotron">
            <h1 style="color: hotpink">Peppa Pig Season One</h1>
        </div>
        <div class="row">
            <div class="col-lg-8">
                <video-js id="my-player"
                          crossorigin="anonymous"
                          class="video-js vjs-big-play-centered vjs-show-big-play-button-on-pause"
                          poster="http://file.lezhi.ren/cartoon/peppa_pig/poster.jpg"
                          controls>
                    <source src="http://file.lezhi.ren/cartoon/peppa_pig/season1/s1_{{ file_id }}.mp4"></source>
                    <track id="my-video-track"
                           kind="subtitles"
                           class="vjs-text-track-settings"
                           src="http://file.lezhi.ren/cartoon/peppa_pig/season1/s1_{{ file_id }}.vtt"
                           srclang="en"
                           label="English"
                           default>
                    <p class="vjs-no-js">
                        To view this video please enable JavaScript, and consider upgrading to a
                        web browser that
                        <a href="https://videojs.com/html5-video-support/" target="_blank">
                            supports HTML5 video
                        </a>
                    </p>
                </video-js>
            </div>
            <div class="col-lg-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">SubTitles</h3>
                    </div>
                    <div class="panel-body">
                        {% for i in subtitle %}
                            <p>{{ i }}</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ super() }}
    <script>
        $(document).ready(function () {
            let player = videojs('my-player', {
                textTrackSettings: true,
                responsive: true,
                fluid: true,
                preload: true,
                controlBar: {
                    volumePanel: {
                        inline: false
                    }
                },
                playbackRates: [0.5, 1, 1.5, 2],
                userActions: {
                    doubleClick: "myDoubleClickHandler"
                }
            });
            player.ready(function () {
                let settings = this.textTrackSettings;
                settings.setValues({
                    "backgroundOpacity": "0",
                    "edgeStyle": "uniform",
                });
                settings.updateDisplay();
            })
        });
    </script>
{% endblock %}
